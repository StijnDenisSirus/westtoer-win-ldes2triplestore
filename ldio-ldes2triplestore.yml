orchestrator:
  pipelines:
    - name: touristattractions
      description: "This pipeline will take members from IMJV, and send to an LDES server"
      input:
        name: Ldio:LdesClient
        config:
          urls:
            - https://ca-westtoer-ldes.bluesea-b3dcdb70.westeurope.azurecontainerapps.io/touristattractions
          sourceFormat: text/turtle
          keep-state: true
          state: sqlite
          sqlite:
            directory: touristattractions
          materialisation:
            enabled: true
          retries:
            enabled: true
            max: 10
            statuses-to-retry: 403, 404
      outputs:
        - name: Ldio:ConsoleOut
          config:
            rdf-writer:
              content-type: application/n-quads
        - name: Ldio:RepositorySink
          config:
            sparql-host: http://rdf4j-server:8080/rdf4j-server
            repository-id: jena
            named-graph: urn:x-arq:DefaultGraph
            batch-size: 1
    - name: taxonomies
      description: "This pipeline will fetch the product types and tree taxonomies."
      input:
        name: Ldio:HttpInPoller
        config:
          url:
            - https://sirus-be.github.io/westtoer-win-ldes2triplestore/taxonomies/producttypes.jsonld
            - https://sirus-be.github.io/westtoer-win-ldes2triplestore/taxonomies/taxonomies-tree.jsonld
            - https://sirus-be.github.io/westtoer-win-ldes2triplestore/taxonomies/toeristische-regios.jsonld
          cron: "*/60 * * * * *"
        adapter:
            name: Ldio:RdfAdapter
      outputs:
        - name: Ldio:ConsoleOut
        - name: Ldio:RepositorySink
          config:
            sparql-host: http://rdf4j-server:8080/rdf4j-server
            repository-id: jena
            named-graph: urn:x-arq:DefaultGraph
            batch-timeout: 10000
